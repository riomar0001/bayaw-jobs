// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

//=====================Applicants Schemas=====================
model applicants_account {
  id                              String                           @id @default(uuid())
  username                        String                           @unique
  email                           String                           @unique
  password                        String
  done_onboarding                 Boolean                          @default(false)
  created_at                      DateTime                         @default(now())
  updated_at                      DateTime                         @default(now())
  applicants_personal_information applicants_personal_information?
  applicants_resume               applicants_resume?
  applicants_profile_picture      applicants_profile_picture?
  applicants_social_media         applicants_social_media?
  applicants_education            applicants_education[]
  applicants_experience           applicants_experience[]
  job_applicants                  job_applicants[]
}

model applicants_personal_information {
  id                    String             @id @default(uuid())
  applicants_account_id String             @unique //Foreign Key
  first_name            String
  last_name             String
  contact_no            String
  date_of_birth         String?
  address               String?
  professional_title    String?
  website               String?
  work_type             WorkType[]         @default([])
  created_at            DateTime           @default(now())
  updated_at            DateTime           @default(now())
  applicant             applicants_account @relation(fields: [applicants_account_id], references: [id], onDelete: Cascade)
}

model applicants_social_media {
  id                    String             @id @default(uuid())
  applicants_account_id String             @unique //Foreign Key
  facebook              String?
  twitter               String?
  linkedin              String?
  github                String?
  created_at            DateTime           @default(now())
  updated_at            DateTime           @default(now())
  applicant             applicants_account @relation(fields: [applicants_account_id], references: [id], onDelete: Cascade)
}

model applicants_profile_picture {
  id                    String             @id @default(uuid())
  applicants_account_id String             @unique //Foreign Key
  profile_picture       String
  created_at            DateTime           @default(now())
  updated_at            DateTime           @default(now())
  applicant             applicants_account @relation(fields: [applicants_account_id], references: [id], onDelete: Cascade)
}

model applicants_resume {
  id                    String             @id @default(uuid())
  applicants_account_id String             @unique //Foreign Key
  resume_file           String
  created_at            DateTime           @default(now())
  updated_at            DateTime           @default(now())
  applicant             applicants_account @relation(fields: [applicants_account_id], references: [id], onDelete: Cascade)
}

model applicants_experience {
  id                    String             @id @default(uuid())
  applicants_account_id String //Foreign Key
  company               String
  location              String
  position              String
  worked_years          String
  created_at            DateTime           @default(now())
  updated_at            DateTime           @default(now())
  applicant             applicants_account @relation(fields: [applicants_account_id], references: [id], onDelete: Cascade)
}

model applicants_education {
  id                    String             @id @default(uuid())
  applicants_account_id String
  school_name           String
  degree                String
  field_of_study        String
  start_date            String
  end_date              String
  created_at            DateTime           @default(now())
  updated_at            DateTime           @default(now())
  applicants            applicants_account @relation(fields: [applicants_account_id], references: [id], onDelete: Cascade)
}

//=====================Companies Schemas=====================

model companies_account {
  id                     String                  @id @default(uuid())
  username               String                  @unique
  password               String
  email                  String                  @unique
  done_onboarding        Boolean                 @default(false)
  created_at             DateTime                @default(now())
  updated_at             DateTime                @default(now())
  posted_jobs            job_offers[]
  companies_information  companies_information?
  companies_social_media companies_social_media?
  companies_logo         companies_logo?
}

model companies_information {
  id                 String              @id @default(uuid())
  company_account_id String              @unique //Foreign Key
  name               String
  address            String
  description        String
  contact_no         String
  email              String
  industry_id        String? //Foreign Key
  created_at         DateTime            @default(now())
  updated_at         DateTime            @default(now())
  industry           company_industries? @relation(fields: [industry_id], references: [id])
  companies          companies_account   @relation(fields: [company_account_id], references: [id], onDelete: Cascade)
}

model companies_logo {
  id                 String            @id @default(uuid())
  company_account_id String            @unique //Foreign Key
  logo_file          String
  created_at         DateTime          @default(now())
  updated_at         DateTime          @default(now())
  companies          companies_account @relation(fields: [company_account_id], references: [id], onDelete: Cascade)
}

model companies_social_media {
  id                 String            @id @default(uuid())
  company_account_id String            @unique //Foreign Key
  facebook           String?
  twitter            String?
  linkedin           String?
  github             String?
  created_at         DateTime          @default(now())
  updated_at         DateTime          @default(now())
  companies          companies_account @relation(fields: [company_account_id], references: [id], onDelete: Cascade)
}

model company_industries {
  id                    String                  @id @default(uuid())
  name                  String                  @unique
  created_at            DateTime                @default(now())
  updated_at            DateTime                @default(now())
  companies_information companies_information[]
}

model job_offers {
  id                 String            @id @default(uuid())
  company_account_id String //Foreign Key
  title              String
  description        String
  location           String
  category           String?
  salary_from        Int?
  salary_to          Int?
  work_schedule      String?
  years_exp          Int?
  is_closed          Boolean
  created_at         DateTime          @default(now())
  updated_at         DateTime          @default(now())
  companies          companies_account @relation(fields: [company_account_id], references: [id], onDelete: Cascade)
  job_applications   job_applicants[]
}

model job_applicants {
  id                    String             @id @default(uuid())
  job_id                String //Foreign Key
  applicants_account_id String //Foreign Key
  status                String
  created_at            DateTime           @default(now())
  updated_at            DateTime           @default(now())
  job_offers            job_offers         @relation(fields: [job_id], references: [id], onDelete: Cascade)
  applicants            applicants_account @relation(fields: [applicants_account_id], references: [id], onDelete: Cascade)
}

enum WorkType {
  FullTime
  PartTime
  Contractual
  Freelance
  Internship
}
